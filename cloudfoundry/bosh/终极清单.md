# 闷骚的第一步
```sh

# 这两个命令是等效的
bosh env == bosh -e <你环境的名称> env
# 事实上在bosh里面，要先创建env，然后才能对环境做一些操作。https://bosh.io/docs/quick-start/#prerequisites
# 对于bosh来说，env就是命根子啊，没有env，什么也做不了，可以把env想象成bosh的环境实例
# 后面的所有命令都要指定某个env的情况下才能继续往下执行

# 看好这个装逼的操作：
bosh env --json # 以json格式来输出内容

bosh envs #获取所有的env

# 更新cloud-config
bosh -e vbox update-cloud-config bosh-deployment/warden/cloud-config.yml
# 上面可以看出来使用的是vbox这个env来执行动作update-cloud-config

# 更新镜像stemcell：https://bosh.io/docs/uploading-stemcells/
bosh -e vbox upload-stemcell https://bosh.io/d/stemcells/bosh-warden-boshlite-ubuntu-trusty-go_agent?v=3468.17 \
  --sha1 1dad6d85d6e132810439daba7ca05694cec208ab
# 后面当然要制定镜像的地址。


# 更新release: https://bosh.io/docs/uploading-releases/
bosh -e vbox upload-release https://bosh.io/d/github.com/cppforlife/zookeeper-release?v=0.0.5 --sha1 65a07b7526f108b0863d76aada7fc29e2c9e2095
bosh -e vbox upload-release ~/Downloads/zookeeper-0.0.5.tgz

bosh releases # 查看所有的releases




# 在bosh的整体架构中，最重要的点就是分层结构，通过不同的层级来确定做不同的事情，这是一个可以借鉴的思想。比如cloud config与deployment的递进关系。

bosh stop name/id # 停止某个instance

```



# bosh相关的监控
```sh
# 事件监控

# 所谓的event就是bosh中任何人在任何时间对bosh做了什么事情。
# 以下几种事情都被bosh自动记录：
#   cloud config update
#   runtime config update
#   deployment create/update/delete
#   VM create/delete
#   disk create/delete
#   bosh ssh events

# https://bosh.io/docs/events/

bosh events # 查看当前有多少个event正在运行
bosh events --deployment <你的deployment的名称>

# 每个event都有一个ID，那么还可以这么玩
bosh events --deployment slow-nats --before-id 5208

# 也可以根据instance来monitoring
bosh events --instance zookeeper/ca5f695a-eb81-49fd-a577-33825cb1b5fc
# 上面表示，有一个instance叫zookeeper/ca5f695a-eb81-49fd-a577-33825cb1b5fc
# 当然你执行上面命令的前提是你已经通过 bosh events已经知道了你想要监控的某个event，然后你精确的狙击该event






# 近期的所有的任务 https://bosh.io/docs/director-tasks/
bosh tasks --recent # 查看bosh近期所有的tasks
bosh tasks --recent=<你要查看的task的数目> # 查看最近的多少个数目的任务

bosh tasks  #正在运行的任务

bosh task <task ID> # 查看某个task的具体东西
bosh cancel-task 766 # 取消ID为766的task






# 登录操作 https://bosh.io/docs/director-users/
bosh login <username>
bosh delete user <你要delete的username>

```




# bosh 部署
```sh
bosh deployments --json # 会呈现一个列表，在其中找到你想要的列表

bosh -d <确切的deployment的名称/ID> logs # 下载某个具体的部署的日志信息，不出意外系统会将日志自动下载到本地

bosh manifest -d <确切的deployment的名称/ID> # 查看这个部署的清单，即定义了要部署哪些东西


```




# bosh部署出来的所有的实例
```sh
bosh instances # 列出所有当前env下拥有的实例

bosh -d <某个特定的部署 name/id> instances --ps #当然前提是你通过bosh deployments --json获取到了你要的deployment

```


# bosh部署导致产生的虚机
```sh
# 部署嘛就会产生虚机
bosh -d <某个特定的部署 name/id> vms

bosh -d <某个特定的部署 name/id> vms --vitals # 装逼实用技能，显示所有的当前虚机的各种指标

bosh -d <某个特定的部署 name/id> ssh <vm名称>/<VM的GUID> #登录到对应的具体的虚机上
# 注意哦，后面的必须是 broker/54c07773-a210-4f0f-8793-e553302e2eb1 类似这种

```


# bosh的VAR

| Resource Name | Description |
|:---|:---|
| /var/vcap/bosh/etc/stemcell_version | stemcell版本 |
| /var/vcap/bosh/etc/stemcell_git_sha1 | sha1 |
| /var/log/syslog | 默认情况下Director会记录下所有的api access event，所以可以在这个路径下去查看所有的api access log |

